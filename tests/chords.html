<!DOCTYPE html>
<html>
<head>

  <title>Chord Test w/ Tab Player</title>
  <script src="../js/jquery-1.7.1.min.js"></script>
  <script src="../js/raphael-min.js"></script>
  <script src="../js/music.js"></script>
  <script src="../js/audiolib.min.js"></script>
  <script src="../js/drum-samples.js"></script>

  <!--vexflow.com guitar tab app-->
  <link href="../tabdiv/tabdiv.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="../tabdiv/vexflow.js"></script>
  <script src="../tabdiv/vextabdiv.js"></script>

  <!-- custom js -->
  <script src="../tabplayer.js"></script>

  <script>
    Vex.Flow.TabDiv.SEL = null; // tabdiv - disable vextab processing on page load

    $(document).ready(function() {

      // tabdiv - parse, create canvas, and draw
      var tabDiv = new Vex.Flow.TabDiv("#tab");

      var tempo = Number($('#txtTempo').val());

      // initialize TabPlayer
      var player = new TabPlayer(tabDiv, tempo);

      
      // click events
      $('#play').click(function() {
        player.tempo = Number($('#txtTempo').val());
        player.play();
      });
    
      $('#stop').click(function() {
        player.stop();
      });

      $('#debug-grid').click(function() {
        if (player.debug) {
          player.debug = false;
          player.cursorCtx.clearRect(0, 0, player.cursorCanvas.width, player.cursorCanvas.height);
        }
        else {
          player.debug = true;
          player.drawDebugRectangles();
        }       
      });
    
    });
  </script>

</head>

<body>
  <div style="width:800px; margin:0px auto;">

    <h1>Chord Test w/ Tab Player</h1>

    Tempo (bpm): <input type="text" id="txtTempo" value="90" />
    <button id="play">Play</button>
    <button id="stop">Stop</button>
    <button id="debug-grid">Toggle Debug Grid</button>
  
    <div id="tab-wrapper" style="position: relative; text-align: center;">
      <div id="tab" class="vex-tabdiv" width=780 scale=1.0 editor="false">
        tabstave notation=true key=C
        notes :w (0/5.2/4.2/3.0/2.0/1) | :w (0/5.2/4.2/3.1/2.0/1) |
        notes :q (3/5.2/4.0/3.1/2.0/1) :q (3/5.2/4.0/3.1/2.0/1)
        notes :q (3/5.2/4.0/3.1/2.0/1) :q (3/5.2/4.0/3.1/2.0/1) |  
        notes :q (3/6.2/5.0/4.0/3.3/2.3/1) :q (3/6.2/5.0/4.0/3.3/2.3/1)
        notes :q (3/6.2/5.0/4.0/3.3/2.3/1) :q (3/6.2/5.0/4.0/3.3/2.3/1)
      </div>
    </div>
  
  </div>
</body>
</html>